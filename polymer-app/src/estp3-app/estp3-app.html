<link rel="import" href="../../bower_components/polymer/polymer.html">

<!--Iron elements-->
<link rel="import" href="../../bower_components/iron-media-query/iron-media-query.html">
<link rel="import" href="../../bower_components/iron-pages/iron-pages.html">

<!--Shared elements-->
<link rel="import" href="../../src/shared-styles/shared-styles.html">

<!--App elements-->
<link rel="import" href="../../bower_components/app-route/app-location.html">
<link rel="import" href="../../bower_components/app-route/app-route.html">

<!--Estp elements-->
<link rel="import" href="../../src/estp-logo/estp-logo.html">
<link rel="import" href="../../src/estp-pages/estp-pages.html">
<link rel="import" href="../../src/estp-organization/estp-organization.html">
<link rel="import" href="../../src/estp-person/estp-person.html">
<link rel="import" href="../../src/estp-price/estp-price.html">
<link rel="import" href="../../src/estp-service/estp-service.html">
<link rel="import" href="../../src/estp-abyss/estp-abyss.html">
<link rel="import" href="../../src/estp-contacts/estp-contacts.html">
<link rel="import" href="../../src/estp-specof/estp-specof.html">
<link rel="import" href="../../src/estp-404/estp-404.html">
<dom-module id="estp3-app">
    <template>
        <style>
            :host {

                --orientatinon-padding: 73px;
                --text-padding: 25px;
                --font-size: 1em;
                --card-padding: 30px 20px 40px 30px;
                font-size: var(--font-size);
                display: block;
                width: 100%;
                position: relative;
                padding-left: var(--orientatinon-padding);
                box-sizing: border-box;

            }

            body {
                overflow-y: scroll !important;
            }

            .copyright {
                display: block;
                font-size: 0.8em;
                padding-top: 15px;
                width: 100%;
                text-align: center;
                color: #5288ae;
            }

        </style>
        <style include="shared-styles"></style>
        <app-location route="{{route}}"></app-location>
        <app-route route="{{route}}" pattern="/:page" data="{{routeData}}" tail="{{tail}}">
        </app-route>
        <iron-media-query query="(min-width: 600px)" query-matches="{{queryMatches}}"></iron-media-query>
        <estp-logo id="logo" hidden$="[[!queryMatches]]"></estp-logo>
        <estp-pages id="pages">
            <h1 hidden$="[[!queryMatches]]">Единая Служба Технической Поддержки</h1>
            <iron-pages selected="{{routeData.page}}" attr-for-selected="name" fallback-selection="organization">
                <estp-organization name="organization"></estp-organization>
                <estp-person name="person"></estp-person>
                <estp-price name="price"></estp-price>
                <estp-service name="service"></estp-service>
                <estp-abyss name="abyss"></estp-abyss>
                <estp-contacts name="contacts"></estp-contacts>
                <estp-specof name="special-offer"></estp-specof>
                <estp-404 name="404"></estp-404>
            </iron-pages>
        </estp-pages>
        <span class="copyright">© 2014–[[copyright]], Единая Служба Технической Поддержки</span>
    </template>

    <script>
        Polymer({

            is: 'estp3-app',
            ready: function (e, d) {
                this.$.logo.animate()
            },
            properties: {
                copyright: {
                    type: Date,
                    value: function () {
                        return new Date().getFullYear();
                    }
                },
                queryMatches: {
                    type: Boolean
                },

            },
            observers: [
                '__currentResolution(queryMatches)'
            ],
            __currentResolution: function (query) {
                if (!query) {
                    this.customStyle['--orientatinon-padding'] = '0',
                    this.customStyle['--text-padding'] = '5px',
                    this.customStyle['--font-size'] = '0.85em'
                    this.customStyle['--card-padding'] = '15px 10px 20px 15px'
                    this.updateStyles()
                } else {
                    this.customStyle['--orientatinon-padding'] = '73px',
                            this.customStyle['--text-padding'] = '25px',
                            this.customStyle['--font-size'] = '1em'
                    this.customStyle['--card-padding'] = '30px 20px 40px 30px'
                    this.updateStyles()
                }
            }

        });
    </script>
</dom-module>
